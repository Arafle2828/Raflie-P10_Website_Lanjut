{"ast":null,"code":"var _jsxFileName = \"C:\\\\WebLanjut_RaflieAditya_2\\\\p10_async_adv\\\\frontend\\\\src\\\\components\\\\StreamPengguna.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StreamPengguna = () => {\n  _s();\n  const [pengguna, setPengguna] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [message, setMessage] = useState('');\n  const startStream = async () => {\n    setLoading(true);\n    setPengguna([]);\n    setError(null);\n    setMessage('Memulai pengambilan data streaming...');\n    try {\n      const response = await fetch('http://localhost:3000/api/pengguna-stream?jumlah=20');\n      if (!response.body) {\n        throw new Error('ReadableStream tidak didukung di browser ini');\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let buffer = '';\n      const processChunks = async () => {\n        while (true) {\n          const {\n            value,\n            done\n          } = await reader.read();\n          if (done) {\n            // Proses sisa buffer jika masih ada\n            if (buffer) {\n              try {\n                const finalData = JSON.parse(buffer);\n                setPengguna(prev => [...prev, ...(Array.isArray(finalData) ? finalData : [finalData])]);\n              } catch (e) {\n                console.error('Error parsing final buffer:', e);\n              }\n            }\n            setMessage('Pengambilan data streaming selesai');\n            setLoading(false);\n            return;\n          }\n\n          // Tambahkan chunk baru ke buffer\n          buffer += decoder.decode(value, {\n            stream: true\n          });\n\n          // Coba untuk mendapatkan JSON yang valid\n          try {\n            // Ini adalah pendekatan sederhana - di kasus nyata, perlu lebih robust\n            // untuk menangani JSON yang terpotong\n            const data = JSON.parse(buffer);\n            setPengguna(data);\n            buffer = '';\n            setMessage(`Menerima data: ${data.length} pengguna`);\n          } catch (e) {\n            // Belum valid JSON, tunggu chunk berikutnya\n            setMessage('Menerima data...');\n          }\n        }\n      };\n      processChunks();\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"stream-container\",\n    style: {\n      backgroundColor: '#fff9e6',\n      padding: '15px',\n      borderRadius: '8px',\n      marginTop: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Streaming API Demo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startStream,\n        disabled: loading,\n        style: {\n          padding: '8px 16px',\n          backgroundColor: '#ff9800',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: loading ? 'not-allowed' : 'pointer'\n        },\n        children: loading ? 'Streaming...' : 'Mulai Streaming'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px',\n          color: '#666'\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px',\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fill, minmax(220px, 1fr))',\n        gap: '10px'\n      },\n      children: pengguna.map((p, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#fff',\n          border: '1px solid #ffcc80',\n          borderRadius: '8px',\n          padding: '10px',\n          animation: 'fadeIn 0.5s ease-in-out',\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: '0 0 8px 0'\n          },\n          children: p.nama\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            color: '#666'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Umur:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), \" \", p.umur, \" tahun\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 52\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), \" \", p.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this)]\n      }, p.id || index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(StreamPengguna, \"F0uynPTUy49sMlPnT7Tp96UCTQY=\");\n_c = StreamPengguna;\nexport default StreamPengguna;\nvar _c;\n$RefreshReg$(_c, \"StreamPengguna\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","StreamPengguna","_s","pengguna","setPengguna","loading","setLoading","error","setError","message","setMessage","startStream","response","fetch","body","Error","reader","getReader","decoder","TextDecoder","buffer","processChunks","value","done","read","finalData","JSON","parse","prev","Array","isArray","e","console","decode","stream","data","length","err","className","style","backgroundColor","padding","borderRadius","marginTop","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","onClick","disabled","color","border","cursor","display","gridTemplateColumns","gap","map","p","index","animation","boxShadow","margin","nama","umur","email","id","jsx","_c","$RefreshReg$"],"sources":["C:/WebLanjut_RaflieAditya_2/p10_async_adv/frontend/src/components/StreamPengguna.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst StreamPengguna = () => {\r\n  const [pengguna, setPengguna] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  \r\n  const startStream = async () => {\r\n    setLoading(true);\r\n    setPengguna([]);\r\n    setError(null);\r\n    setMessage('Memulai pengambilan data streaming...');\r\n    \r\n    try {\r\n      const response = await fetch('http://localhost:3000/api/pengguna-stream?jumlah=20');\r\n      \r\n      if (!response.body) {\r\n        throw new Error('ReadableStream tidak didukung di browser ini');\r\n      }\r\n      \r\n      const reader = response.body.getReader();\r\n      const decoder = new TextDecoder();\r\n      let buffer = '';\r\n      \r\n      const processChunks = async () => {\r\n        while (true) {\r\n          const { value, done } = await reader.read();\r\n          \r\n          if (done) {\r\n            // Proses sisa buffer jika masih ada\r\n            if (buffer) {\r\n              try {\r\n                const finalData = JSON.parse(buffer);\r\n                setPengguna(prev => [...prev, ...(Array.isArray(finalData) ? finalData : [finalData])]);\r\n              } catch (e) {\r\n                console.error('Error parsing final buffer:', e);\r\n              }\r\n            }\r\n            setMessage('Pengambilan data streaming selesai');\r\n            setLoading(false);\r\n            return;\r\n          }\r\n          \r\n          // Tambahkan chunk baru ke buffer\r\n          buffer += decoder.decode(value, { stream: true });\r\n          \r\n          // Coba untuk mendapatkan JSON yang valid\r\n          try {\r\n            // Ini adalah pendekatan sederhana - di kasus nyata, perlu lebih robust\r\n            // untuk menangani JSON yang terpotong\r\n            const data = JSON.parse(buffer);\r\n            setPengguna(data);\r\n            buffer = '';\r\n            setMessage(`Menerima data: ${data.length} pengguna`);\r\n          } catch (e) {\r\n            // Belum valid JSON, tunggu chunk berikutnya\r\n            setMessage('Menerima data...');\r\n          }\r\n        }\r\n      };\r\n      \r\n      processChunks();\r\n    } catch (err) {\r\n      setError(`Error: ${err.message}`);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"stream-container\" style={{ \r\n      backgroundColor: '#fff9e6', \r\n      padding: '15px', \r\n      borderRadius: '8px', \r\n      marginTop: '20px' \r\n    }}>\r\n      <h3>Streaming API Demo</h3>\r\n      \r\n      <div style={{ marginBottom: '15px' }}>\r\n        <button \r\n          onClick={startStream}\r\n          disabled={loading}\r\n          style={{ \r\n            padding: '8px 16px', \r\n            backgroundColor: '#ff9800', \r\n            color: 'white', \r\n            border: 'none', \r\n            borderRadius: '4px', \r\n            cursor: loading ? 'not-allowed' : 'pointer' \r\n          }}\r\n        >\r\n          {loading ? 'Streaming...' : 'Mulai Streaming'}\r\n        </button>\r\n        \r\n        {message && (\r\n          <div style={{ marginTop: '10px', color: '#666' }}>\r\n            {message}\r\n          </div>\r\n        )}\r\n        \r\n        {error && (\r\n          <div style={{ marginTop: '10px', color: 'red' }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div style={{ \r\n        display: 'grid', \r\n        gridTemplateColumns: 'repeat(auto-fill, minmax(220px, 1fr))', \r\n        gap: '10px' \r\n      }}>\r\n        {pengguna.map((p, index) => (\r\n          <div \r\n            key={p.id || index} \r\n            style={{ \r\n              backgroundColor: '#fff',\r\n              border: '1px solid #ffcc80',\r\n              borderRadius: '8px',\r\n              padding: '10px',\r\n              animation: 'fadeIn 0.5s ease-in-out',\r\n              boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n            }}\r\n          >\r\n            <h4 style={{ margin: '0 0 8px 0' }}>{p.nama}</h4>\r\n            <p style={{ margin: '0', color: '#666' }}>\r\n              <strong>Umur:</strong> {p.umur} tahun<br />\r\n              <strong>Email:</strong> {p.email}\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      <style jsx>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; transform: translateY(10px); }\r\n          to { opacity: 1; transform: translateY(0); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StreamPengguna;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}